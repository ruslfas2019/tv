<!DOCTYPE html>
<html>
<head>
  <script src="js/shaka-player.ui.js"></script>
  <link rel="stylesheet" href="css/controls.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: black;
      overflow: hidden; /* Prevent scrollbars on PC browsers */
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    #video-container {
      width: 100%;
      max-width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    video {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    /* Media query for mobile devices */
    @media (max-width: 767px) {
      #video-container {
        width: 100%;
        max-height: 100vh;
      }

      video {
        max-height: 100vh;
      }

      .shaka-controls-button {
        /* Adjust the font size and padding for control buttons */
        font-size: 24px !important;
        padding: 8px !important;
      }

      .shaka-time-and-duration {
        /* Adjust font size for time and duration display */
        font-size: 16px !important;
      }

      /* Style for mobile browser controls */
      .shaka-controls-bar {
        background: rgba(0, 0, 0, 0.7); /* Semi-transparent background */
        bottom: 0;
        padding: 8px 16px;
        width: 100%;
        box-sizing: border-box;
        position: absolute; /* Position the controls at the bottom */
      }
    }
  </style>
</head>
<body>
  <div id="video-container" data-shaka-player-container data-shaka-player-cast-receiver-id="1BA79154">
    <video autoplay data-shaka-player id="video" poster="images/Asia-Cup-2023.jpg"></video>
  </div>
  <script type="text/javascript">
        const kid = 'd39790dc8ad2220261d183e1607cb3e8';
        const key = 'f6ac47b7cf425e121afd360296dddfa8';
        const options = {
            source: "https://bpcdn.dialog.lk/bpk-tv/Ch204/output/index.mpd",
            plugins: [DashShakaPlayback, LevelSelector, ClapprPip.PipButton, ClapprPip.PipPlugin],
            shakaConfiguration: {
                drm: {
                    clearKeys: {
                        [kid]: key
                    }
                },
                streaming: {
                    lowLatencyMode: true,
                    inaccurateManifestTolerance: 0,
                    rebufferingGoal: 0.01,
                    segmentPrefetchLimit: 2,
                }
            },
            levelSelectorConfig: {
                title: 'Quality',
                labelCallback: function (playbackLevel, customLabel) {
                    return customLabel + playbackLevel.level.height + 'p'; // High 720p
                }
            },
            parentId: "#player",
        }
        let player = new Clappr.Player(options);
    </script>
</body>
</html>
